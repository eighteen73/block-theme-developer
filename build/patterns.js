(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.plugins,o=window.wp.editor,r=window.wp.components,a=window.wp.data,n=window.wp.element,s=window.wp.apiFetch;var l=e.n(s);const i=window.wp.i18n,d=window.ReactJSXRuntime;(0,t.registerPlugin)("btd-pattern-metadata",{render:function(){if("btd_pattern"!==(0,a.useSelect)(e=>e("core/editor").getCurrentPostType(),[]))return null;const e=(0,a.useSelect)(e=>{const t=e("core/editor").getEditedPostAttribute("meta")||{};return{description:t._btd_description||"",categories:t._btd_categories||[],keywords:t._btd_keywords||[],viewportWidth:t._btd_viewport_width||1280,blockTypes:t._btd_block_types||[],postTypes:t._btd_post_types||[],templateTypes:t._btd_template_types||[],inserter:void 0===t._btd_inserter||t._btd_inserter}},[]),[t,s]=(0,n.useState)([]),[p,_]=(0,n.useState)([]),[c,h]=(0,n.useState)([]),[m,w]=(0,n.useState)([]);(0,n.useEffect)(()=>{window.btdData?(s(window.btdData.patternCategories||[]),_(window.btdData.postTypes||[]),h(window.btdData.blockTypes||[]),w(window.btdData.templateTypes||[])):Promise.all([l()({path:"/wp/v2/block-patterns/categories"}),l()({path:"/wp/v2/types"})]).then(([e,t])=>{const o=e.map(e=>e.name),r=Object.values(t).filter(e=>e.viewable&&"attachment"!==e.slug).map(e=>e.slug);s(o),_(r),h([])}).catch(e=>{s([]),_([]),h([]),w([])})},[]);const{editPost:b}=(0,a.useDispatch)("core/editor"),u=(e,t)=>{b({meta:{[`_btd_${e}`]:t}})},x=e=>Array.isArray(e)?e:e?e.split(",").map(e=>e.trim()).filter(e=>e):[],g=e=>Array.isArray(e)?e:[];return(0,d.jsxs)(o.PluginDocumentSettingPanel,{name:"btd-pattern-metadata",title:(0,i.__)("Pattern Metadata","block-theme-developer"),className:"btd-pattern-metadata-panel",children:[(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)(r.TextareaControl,{label:(0,i.__)("Description","block-theme-developer"),value:e.description,onChange:e=>u("description",e),help:(0,i.__)("A brief description of what this pattern does.","block-theme-developer"),__nextHasNoMarginBottom:!0})}),(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)("div",{style:{width:"100%"},children:(0,d.jsx)(r.FormTokenField,{id:"btd-categories",label:(0,i.__)("Categories","block-theme-developer"),value:x(e.categories),_experimentalAutoSelectFirstMatch:!0,__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,suggestions:t,onChange:e=>u("categories",g(e)),help:(0,i.__)("Select from WordPress core pattern categories.","block-theme-developer"),__nextHasNoMarginBottom:!0})})}),(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)("div",{style:{width:"100%"},children:(0,d.jsx)(r.FormTokenField,{id:"btd-keywords",label:(0,i.__)("Keywords","block-theme-developer"),value:x(e.keywords),onChange:e=>u("keywords",g(e)),help:(0,i.__)("Keywords to help users find this pattern.","block-theme-developer"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})})}),(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)("div",{style:{width:"100%"},children:(0,d.jsx)(r.FormTokenField,{id:"btd-block-types",label:(0,i.__)("Block Types","block-theme-developer"),value:x(e.blockTypes),suggestions:c,onChange:e=>u("block_types",g(e)),help:(0,i.__)("Select from available block types and template part areas.","block-theme-developer"),__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})})}),(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)("div",{style:{width:"100%"},children:(0,d.jsx)(r.FormTokenField,{id:"btd-post-types",label:(0,i.__)("Post Types","block-theme-developer"),value:x(e.postTypes),suggestions:p,onChange:e=>u("post_types",g(e)),help:(0,i.__)("Select from registered post types.","block-theme-developer"),__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})})}),(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)("div",{style:{width:"100%"},children:(0,d.jsx)(r.FormTokenField,{id:"btd-template-types",label:(0,i.__)("Template Types","block-theme-developer"),value:x(e.templateTypes),onChange:e=>u("template_types",g(e)),suggestions:Object.keys(m).map(e=>m[e]?.title||e),help:(0,i.__)("Template types this pattern is designed for.","block-theme-developer"),__experimentalExpandOnFocus:!0,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})})}),(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)(r.TextControl,{label:(0,i.__)("Viewport Width","block-theme-developer"),type:"number",value:e.viewportWidth,onChange:e=>u("viewport_width",parseInt(e,10)||1200),help:(0,i.__)("Suggested viewport width for displaying this pattern.","block-theme-developer"),__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0})}),(0,d.jsx)(r.PanelRow,{children:(0,d.jsx)(r.ToggleControl,{label:(0,i.__)("Show in Inserter","block-theme-developer"),checked:e.inserter,onChange:e=>u("inserter",e),help:(0,i.__)("Whether this pattern should appear in the pattern inserter.","block-theme-developer"),__nextHasNoMarginBottom:!0})})]})}})})();